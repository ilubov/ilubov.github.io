

<!DOCTYPE html>
<html lang="en">
<!--begin head-->

<head>
    <meta charset="utf-8">
<!--begin title-->

<title>
    
    mysql explain |
    
    ilubov</title>
<!--end title-->
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<!--begin mete-->

<meta name="description" content="Get busy living or get busy dying."/>

<meta name="author" content="ilubov"/>

<!--end mete-->
<!--begin keywords-->
<meta name="keywords" content="IO,docker,github,google,guava,hexo,java,jvm,linux,mybatis,mysql,nginx,redis,sharding jdbc,spring,spring cloud,并发,支付,数据库,服务器,设计模式,集合"/>
<!--end keywords-->
<!--begin rss-->

<!--end rss-->
<!--begin favicon-->

<link rel="icon" href="/favicon.ico">

<!--end favicon-->
<!--begin style-->

<!-- stylesheets list from config.yml -->

<link rel="stylesheet" href="/css/hannah.css">


<!--end style-->
<meta name="generator" content="Hexo 5.0.2"></head>
<!--end head-->
<!--begin body-->

<body class="container-fluid">

    <!--begin menu-->
    <div class="hannah-menu">
    <i class="fh fh-ravelry fa-2x btn fixed-menu animated bounce" id="btn_menu" aria-hidden="true"></i>
    <div class="menu-outer container-fluid hide animated" id="div_menu">
        <div class="row" style="margin-bottom: 5px;">
            
            <div class="col-md-offset-2 col-md-3 col-xs-4 text-center left-social">
                
                <a target="_blank" href="https://github.com/ilubov" title="GitHub"><i class="fh fh-github"></i></a>
                
                <style>
                    .left-social {
                        height: 132px;
                        line-height: 132px;
                        font-size: 66px;
                    }

                    .left-social * {
                        color: #f1ce8e;
                    }

                    @media (max-width: 767px) {
                        .left-social {
                            line-height: 132px;
                            font-size: 33px;
                        }
                    }
                </style>
            </div>
            <!--begin handImg-->
            <div class="col-md-2 col-xs-4 text-center">
                
                <img src="/img/logo.jpg" alt="Head Image" class="img-circle">
                
            </div>
            <!--end handImg-->
            <div class="col-md-3 col-xs-4 text-center right-social">
                
                <style>
                    .right-social {
                        height: 132px;
                        line-height: 132px;
                        font-size: 66px;
                    }

                    @media (max-width: 767px) {
                        .right-social {
                            line-height: 132px;
                            font-size: 33px;
                        }
                    }

                    .right-social * {
                        color: #f1ce8e;
                    }
                </style>
            </div>
        </div>
        <div class="row">
            <div class="menu-content col-md-8 col-md-push-2 col-xs-12 ">
                <dl class="menu-content-item">
                    <dt class="menu-content-title">
                        <i class="fh fh-bars" aria-hidden="true"></i> Menu
                    </dt>
                    <dd class="menu-content-content">
                        
                        <div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada">
                            <a href="/" class="btn btn-block">
                                
                                <i class="fh fh-ravelry"></i>
                                Home
                            </a>
                        </div>
                        
                        <div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada">
                            <a href="/categories/index.html" class="btn btn-block">
                                
                                <i class="fh fh-cubes"></i>
                                Category
                            </a>
                        </div>
                        
                        <div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada">
                            <a href="/tags/index.html" class="btn btn-block">
                                
                                <i class="fh fh-tags"></i>
                                Tag
                            </a>
                        </div>
                        
                        <div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada">
                            <a target="_blank" rel="noopener" href="https://www.ilubov.cn" class="btn btn-block">
                                
                                <i class="fh fh-about"></i>
                                About
                            </a>
                        </div>
                        
                        <div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada">
                            <a href="" class="btn btn-block">
                                <i class="fh fh-rss" aria-hidden="true"></i> RSS
                            </a>
                        </div>
                    </dd>
                </dl>
            </div>
        </div>
        <div class="row">
            <div class="menu-content col-md-8 col-md-offset-2 col-xs-12 ">
                <dl class="col-md-6 col-xs-6 menu-content-item">
                    <dt class="menu-content-title">
                        <i class="fh fh-cubes" aria-hidden="true"></i> Category
                    </dt>
                    <dd class="menu-content-content animated zoomIn">
                        <ul class="menu-cate-list"><li class="menu-cate-list-item"><a class="menu-cate-list-link" href="/categories/hexo/"><i class="fh fh-cube" aria-hidden="true"></i> hexo</a><span class="menu-cate-list-count">1</span></li><li class="menu-cate-list-item"><a class="menu-cate-list-link" href="/categories/java/"><i class="fh fh-cube" aria-hidden="true"></i> java</a><span class="menu-cate-list-count">23</span></li><li class="menu-cate-list-item"><a class="menu-cate-list-link" href="/categories/linux/"><i class="fh fh-cube" aria-hidden="true"></i> linux</a><span class="menu-cate-list-count">1</span></li><li class="menu-cate-list-item"><a class="menu-cate-list-link" href="/categories/nginx/"><i class="fh fh-cube" aria-hidden="true"></i> nginx</a><span class="menu-cate-list-count">1</span></li><li class="menu-cate-list-item"><a class="menu-cate-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"><i class="fh fh-cube" aria-hidden="true"></i> 数据库</a><span class="menu-cate-list-count">7</span></li><li class="menu-cate-list-item"><a class="menu-cate-list-link" href="/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"><i class="fh fh-cube" aria-hidden="true"></i> 服务器</a><span class="menu-cate-list-count">1</span></li></ul>
                    </dd>
                </dl>
                <dl class="col-md-6 col-xs-6 menu-content-item">
                    <dt class="menu-content-title">
                        <i class="fh fh-tag" aria-hidden="true"></i> Tags
                    </dt>
                    <dd class="menu-content-content animated zoomIn">
                        <ul class="menu-tag-list" itemprop="keywords"><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/IO/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> IO</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/docker/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> docker</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/github/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> github</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/google/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> google</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/guava/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> guava</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/hexo/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> hexo</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/java/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> java</a><span class="menu-tag-list-count">23</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/jvm/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> jvm</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/linux/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> linux</a><span class="menu-tag-list-count">2</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/mybatis/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> mybatis</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/mysql/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> mysql</a><span class="menu-tag-list-count">4</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/nginx/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> nginx</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/redis/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> redis</a><span class="menu-tag-list-count">2</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/sharding-jdbc/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> sharding jdbc</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/spring/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> spring</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/spring-cloud/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> spring cloud</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/%E5%B9%B6%E5%8F%91/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> 并发</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/%E6%94%AF%E4%BB%98/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> 支付</a><span class="menu-tag-list-count">2</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> 数据库</a><span class="menu-tag-list-count">7</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> 服务器</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> 设计模式</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/%E9%9B%86%E5%90%88/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> 集合</a><span class="menu-tag-list-count">1</span></li></ul>
                    </dd>
                </dl>
            </div>
        </div>
    </div>
</div>
    <!--end menu-->

    <div class="row hannah-body">
        <div class="col-md-8 col-md-push-2 col-xs-12">
            <!--begin breadcrumb-->
            <div class="bread-crumb">
    <ul class="bread-crumb-menu animated rubberBand">
        <li><a href="/"><i class="fh fh-ravelry" aria-hidden="true"></i> Home</a></li>
        
        <li><a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"><i class="fh fh-cube" aria-hidden="true"></i> 数据库</a>
        </li>
        
        <li>
            
            <i class="fh fh-newspaper-o" aria-hidden="true"></i>
            
            mysql explain
        </li>
        
    </ul>
    <div class="bread-crumb-search">
        <div class="search">
    <i class="fh fh-search icon-search"></i>
    <input placeholder="Search ..." onkeyup="searchFunc(this,event,'/search.xml')"
           class="input-search animated fadeInRight"/>
    <div class="search-result animated fadeInRight">
        <a class="animated tada col-lg-12 search-result-item result-link" href="/2021/02/25/java-es/">StringBoot + ElasticSearch</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2021/02/23/docker-es/">ElasticSearch环境搭建</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2021/02/22/java-hashmap/">HashMap</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2021/02/20/java-youdao-translate/">有道翻译api</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2021/02/01/java-easy-excel/">EasyExcel导出合并表头的Excel</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2021/01/24/java8-foreach/">可以break的forEach</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2021/01/22/jet-cache/">JetCache</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2021/01/18/caching-algorithm/">缓存算法</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2021/01/17/work-wx-open-default-browser/">企业微信电脑客户端打开系统默认浏览器</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2021/01/15/mybatis-second-level-cache/">mybatis-plus二级缓存</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2021/01/02/java-try-with-resources/">try-with-resources语句</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2020/12/06/nginx_google/">Nginx反向代理Google</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2020/12/04/hexo-source-file-backup/">将hexo源文件备份到github</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2020/11/13/mysql-function/">mysql使用函数递归查找父级或子级id</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2020/11/12/java-xxl-job/">xxl job</a>
    </div>
</div>
    </div>
</div>
            <!--end breadcrumb-->
            <!--begin body-->
            <article class="post animated rollIn">
    <h1 class="post-title">mysql explain</h1>
    <div class="post-subtitle">
        
        <time datetime="2020-10-05T11:22:17.000Z" class="item">
            <i class="fh fh-calendar" aria-hidden="true"></i>&nbsp;&nbsp;2020-10-05
        </time>
        
        
        <span class="item">
      <i class="fh fh-cubes" aria-hidden="true"></i>&nbsp;
            
            <a class="label label-primary tags" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">
           <i class="fh fh-cube" aria-hidden="true"></i>&nbsp;数据库
        </a>
            
        </span>
        
        
        <span class="item">
        <i class="fh fh-tags" aria-hidden="true"></i>&nbsp;
            
            <a class="label label-info tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">
            <i class="fh fh-tag" aria-hidden="true"></i>&nbsp;数据库
            </a>
            
            <a class="label label-info tags" href="/tags/mysql/">
            <i class="fh fh-tag" aria-hidden="true"></i>&nbsp;mysql
            </a>
            
        </span>
        
    </div>
    
    <h4 id="mysql-explain"><a href="#mysql-explain" class="headerlink" title="mysql explain"></a>mysql explain</h4><p>MySQL中的<strong>explain</strong>命令显示了mysql如何使用索引来处理select语句以及连接表。<strong>explain</strong>显示的信息可以帮助选择更好的索引和写出更优化的查询语句。</p>
<h4 id="一、格式"><a href="#一、格式" class="headerlink" title="一、格式"></a>一、格式</h4><p><strong>explain + select</strong> 语句；</p>
<p>例如：explain select * from tb_student;</p>
<h4 id="二、5-5和5-7版本explain的区别"><a href="#二、5-5和5-7版本explain的区别" class="headerlink" title="二、5.5和5.7版本explain的区别"></a>二、5.5和5.7版本explain的区别</h4><p>5.7之后的版本默认会有 partitions 和 filtered两列，但是5.5版本中是没有的，需要</p>
<p>使用explain partitions select ……来显示带有partitions 的列，</p>
<p>使用explain extended select ……来显示带有filtered的列。</p>
<h4 id="三、explain的作用"><a href="#三、explain的作用" class="headerlink" title="三、explain的作用"></a>三、explain的作用</h4><ul>
<li><p>1.描述MySQL如何执行查询操作、执行顺序，使用到的索引，以及MySQL成功返回结果集需要执行的行数。</p>
</li>
<li><p>2.可以帮助我们分析 select 语句,让我们知道查询效率低下的原因,从而改进我们的查询，让查询优化器能够更好的工作</p>
</li>
</ul>
<p>查询优化器的作用：</p>
<ul>
<li><p>1.优化select 语句，分析哪些是常量表达式（例如id=1），以及分析哪些表达式可以直接转换成常量的</p>
</li>
<li><p>2.对where条件进行简化和转换，如去掉无用条件，调整条件结构等</p>
</li>
<li><p>3.读取涉及的表的统计信息，并计算分析（例如返回的行数，索引信息等），最终得出执行计划</p>
</li>
</ul>
<h4 id="四、执行计划（QEP）包含的信息"><a href="#四、执行计划（QEP）包含的信息" class="headerlink" title="四、执行计划（QEP）包含的信息"></a>四、执行计划（QEP）包含的信息</h4><ul>
<li><strong>id</strong>：标识符，表示执行顺序</li>
<li><strong>select _type</strong>：查询类型</li>
<li><strong>table</strong>：输出行所引用的表</li>
<li><strong>partitions</strong>：使用的哪个分区，需要结合表分区才可以看到</li>
<li><strong>type</strong>：表示按某种类型来查询，例如按照索引类型查找，按照范围查找。从最好到最差的连接类型为const、eq_reg、ref、range、index和all</li>
<li><strong>possible_keys</strong>：可能用到的索引，保存的是索引名称，如果是多个索引的话，用逗号隔开</li>
<li><strong>key</strong>：实际用到的索引，保存的是索引名称，如果是多个索引的话，用逗号隔开</li>
<li><strong>key_len</strong>：表示本次查询中，所选择的索引长度有多少字节</li>
<li><strong>ref</strong>：显示索引的哪一列被使用了，如果可能的话，是一个常数</li>
<li><strong>rows</strong>：显示mysql认为执行查询时必须要返回的行数</li>
<li><strong>filtered</strong>：通过过滤条件之后对比总数的百分比</li>
<li><strong>extra</strong>：额外的信息，例如：using file sort ，using where， using join buffer，using index等</li>
</ul>
<h4 id="五、执行计划中各个参数的详解"><a href="#五、执行计划中各个参数的详解" class="headerlink" title="五、执行计划中各个参数的详解"></a>五、执行计划中各个参数的详解</h4><h5 id="1-id"><a href="#1-id" class="headerlink" title="1.id"></a><strong>1.id</strong></h5><p>表示select标识符，同时表明执行顺序，也就是说id是一个查询的序列号，查询序号即为sql语句执行的顺序。</p>
<p>（1）当id值相同时，按从上到下的顺序执行</p>
<p>（2）当id全部不同时，按id从大到小执行</p>
<p>（3）当id部分不同时，先执行id大的，id相同的，按从上到下的顺序执行</p>
<h5 id="2-select-type"><a href="#2-select-type" class="headerlink" title="2.select_type"></a><strong>2.select_type</strong></h5><p>（1）simple：表示简单的select，没有union和子查询</p>
<p>（2）primary：最外面的查询 或者 主查询，在有子查询的语句中，最外面的select查询就是primary</p>
<p>（3）subquery：子查询</p>
<p>（4）union：union语句的第二个或者说是后面那一个select</p>
<p>（5）union result：union之后的结果</p>
<p>（6）dependent unoin：unoin 中的第二个或随后的 select 查询，依赖于外部查询的结果集</p>
<p>（7）dependent subquery：子查询中的第一个 select 查询，依赖于外部 查询的结果集</p>
<p>（8）derived：衍生表（5.7版本中不存在这一个）</p>
<h5 id="3-table"><a href="#3-table" class="headerlink" title="3.table"></a><strong>3.table</strong></h5><p>通常是表名，或者表的别名，或者一个为查询产生临时表的标示符（如派生表、子查询、集合）</p>
<h5 id="4-partitions"><a href="#4-partitions" class="headerlink" title="4.partitions"></a><strong>4.partitions</strong></h5><p>使用的哪些分区（对于非分区表值为null），在5.5版本中需要加上explain partitions select …..</p>
<h5 id="5-type"><a href="#5-type" class="headerlink" title="5.type"></a><strong>5.type</strong></h5><p>（1）const：表中最多有一个匹配行，const用于比较primary key 或者unique索引。因为只匹配一行数据，所以很快</p>
<p>（2）eq_ref：唯一性索引扫描，对于每个来自于前面的表的记录，从该表中读取唯一一行</p>
<p>（3）ref：非唯一性索引扫描，对于每个来自于前面的表的记录，所有匹配的行从这张表取出</p>
<p>（4）ref_or_null：类似于ref，但是可以搜索包含null值的行，例如：select * from student where address=’xxx’ or address is null，需要在address建立索引。</p>
<p>（5）index_merge：查询语句用到了一张表的多个索引时，mysql会将多个索引合并到一起</p>
<p>（6）range：按指定范围（如in、&lt;、&gt;、between and等，但是前提是此字段要建立索引）来检索，很常见。如：select * from student where id &lt; 5，id上要有索引。</p>
<p>（7）index：全”表“扫描，但是是在索引树中扫描，通常比ALL快，因为索引文件通常比数据文件小，index扫描是通过二叉树的方式扫描，而all是扫描物理表。（也就是说虽然all和index都是读全表，但index是从索引中读取的，而all是从硬盘中读的）。例如：select name from student，但name字段上需要建立索引，也就是查询的字段属于索引中的字段。</p>
<p>（8）all：全表扫描，扫描完整的物理表，此时就需要优化了。</p>
<h5 id="6-possible-keys"><a href="#6-possible-keys" class="headerlink" title="6.possible_keys"></a><strong>6.possible_keys</strong></h5><p>指出 MySQL 能在该表中可能使用的索引，显示的是索引的名称，多个索引用逗号隔开，如果没有，则为null。</p>
<h5 id="7-key"><a href="#7-key" class="headerlink" title="7.key"></a><strong>7.key</strong></h5><p>MySQL决定实际用到的索引，显示的是索引的名称，多个索引用逗号隔开，如果没有，则为null</p>
<h5 id="8-key-len"><a href="#8-key-len" class="headerlink" title="8.key_len"></a><strong>8.key_len</strong></h5><p>当用到组合索引的时候判断索引是否完全用上。</p>
<p>实例：假设student表中有id int,name char(20) DEFAULT NULL,address varchar(20) DEFAULT NULL,remark varchar(20) NOT NULL 字段，建立的索引是 idx_address_remark（在address和remark上建立的组合索引）</p>
<p>查询的sql是：select * from student where address=’深圳’ and remark=’java coder’，此时，执行计划中的key_len是 （203+1+2）+ （203+2）= 125，那么这个是怎么得来的呢？</p>
<p>解析：20表示建表的时候 varchar(20) ，3表示utf8字符集占用3个字节，1表示MySQL需要1个字节表示null，2表示变长字段（varchar是变长的）。  </p>
<p>假设drop掉刚刚建立的索引，新建索引 idx_name_address（在name和address上建立组合索引）</p>
<p>查询的sql是：select * from student where name=’xbq’ and address=’深圳’，此时，执行计划中的key_len是 （203+1）+ （203+2）= 123，那么这个值是怎么得来的呢？</p>
<p>解析：20表示建表的时候 char(20) ，3表示utf8字符集占用3个字节，1表示MySQL需要1个字节标识null，即 20*3+1，后面的同样的道理。</p>
<p>key_len只计算where条件用到的索引长度，而排序和分组就算用到了索引，也不会计算到key_len中。</p>
<p>计算key_len的公式：</p>
<p>varchr(10)变长字段且允许NULL = 10 * ( character set：utf8=3,gbk=2,latin1=1) + 1(NULL) + 2(变长字段)</p>
<p>varchr(10)变长字段且不允许NULL = 10 *( character set：utf8=3,gbk=2,latin1=1) + 2(变长字段)</p>
<p>char(10)固定字段且允许NULL = 10 * ( character set：utf8=3,gbk=2,latin1=1)+1(NULL)</p>
<p>char(10)固定字段且不允许NULL = 10 * ( character set：utf8=3,gbk=2,latin1=1)</p>
<h5 id="9-ref"><a href="#9-ref" class="headerlink" title="9.ref"></a><strong>9.ref</strong></h5><p>显示索引的哪一列被使用了，如果可能的话，是一个常数</p>
<h5 id="10-rows"><a href="#10-rows" class="headerlink" title="10.rows"></a><strong>10.rows</strong></h5><p>显示mysql认为执行查询时必须要返回的行数，可结合type和key分析，没有用上索引的情况下，会全表扫描。rows的值越小越好，说明检索的数据少</p>
<h5 id="11-filtered"><a href="#11-filtered" class="headerlink" title="11.filtered"></a><strong>11.filtered</strong></h5><p>给出了一个百分比的值，这个百分比值和rows列的值一起使用，可以估计出那些将要和执行计划中的前一个表（前一个表就是指id列的值比当前表的id小的表）进行连接的行的数目。</p>
<p>这一列在5.5版本中，需要加上 explain extended select ….。</p>
<h5 id="12-extra"><a href="#12-extra" class="headerlink" title="12.extra"></a><strong>12.extra</strong></h5><p>此字段显示一些额外的信息，但是此字段的部分值具有优化的参考意义。</p>
<p>（1）using where：表示查询使用了where 语句来处理结果</p>
<p>（2）using index：表示使用了覆盖索引。这个值重点强调了只需要使用索引就可以满足查询表的要求，不需要直接访问表数据。</p>
<p>（3）using join buffer：这个值强调了在获取连接条件时没有使用索引，并且需要连接缓冲区来存储中间结果。如果出现了这个值，那应该注意，根据查询的具体情况可能需要添加索引来改进性能</p>
<p>（4）using filesort：这是 order by 语句的结果。这可能是一个CPU密集型的过程。using filesort表示出现了文件内排序，表示很不好的现象，必须要优化，特别是大表，可以通过选择合适的索引来改进性能，用索引来为查询结果排序。</p>
<p>（5）using temporary：mysql需要创建一张临时表来保存中间结果。 也就是说，需要先把数据放到临时表中，然后从临时表中获取需要的数据。出现这种临时表，也是必须需要优化的地方，特别是数据量大的情况。两个常见的原因是在来自不同表的列上使用了distinct，或者使用了不同的 order by 和 group by 列。</p>

</article>
<ol class="animated rollIn hannah-toc"><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-4"><a class="animated rollIn hannah-toc-link" href="#mysql-explain"><span class="animated rollIn hannah-toc-text">mysql explain</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-4"><a class="animated rollIn hannah-toc-link" href="#%E4%B8%80%E3%80%81%E6%A0%BC%E5%BC%8F"><span class="animated rollIn hannah-toc-text">一、格式</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-4"><a class="animated rollIn hannah-toc-link" href="#%E4%BA%8C%E3%80%815-5%E5%92%8C5-7%E7%89%88%E6%9C%ACexplain%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="animated rollIn hannah-toc-text">二、5.5和5.7版本explain的区别</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-4"><a class="animated rollIn hannah-toc-link" href="#%E4%B8%89%E3%80%81explain%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="animated rollIn hannah-toc-text">三、explain的作用</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-4"><a class="animated rollIn hannah-toc-link" href="#%E5%9B%9B%E3%80%81%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%EF%BC%88QEP%EF%BC%89%E5%8C%85%E5%90%AB%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="animated rollIn hannah-toc-text">四、执行计划（QEP）包含的信息</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-4"><a class="animated rollIn hannah-toc-link" href="#%E4%BA%94%E3%80%81%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%E4%B8%AD%E5%90%84%E4%B8%AA%E5%8F%82%E6%95%B0%E7%9A%84%E8%AF%A6%E8%A7%A3"><span class="animated rollIn hannah-toc-text">五、执行计划中各个参数的详解</span></a><ol class="animated rollIn hannah-toc-child"><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-5"><a class="animated rollIn hannah-toc-link" href="#1-id"><span class="animated rollIn hannah-toc-text">1.id</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-5"><a class="animated rollIn hannah-toc-link" href="#2-select-type"><span class="animated rollIn hannah-toc-text">2.select_type</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-5"><a class="animated rollIn hannah-toc-link" href="#3-table"><span class="animated rollIn hannah-toc-text">3.table</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-5"><a class="animated rollIn hannah-toc-link" href="#4-partitions"><span class="animated rollIn hannah-toc-text">4.partitions</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-5"><a class="animated rollIn hannah-toc-link" href="#5-type"><span class="animated rollIn hannah-toc-text">5.type</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-5"><a class="animated rollIn hannah-toc-link" href="#6-possible-keys"><span class="animated rollIn hannah-toc-text">6.possible_keys</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-5"><a class="animated rollIn hannah-toc-link" href="#7-key"><span class="animated rollIn hannah-toc-text">7.key</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-5"><a class="animated rollIn hannah-toc-link" href="#8-key-len"><span class="animated rollIn hannah-toc-text">8.key_len</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-5"><a class="animated rollIn hannah-toc-link" href="#9-ref"><span class="animated rollIn hannah-toc-text">9.ref</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-5"><a class="animated rollIn hannah-toc-link" href="#10-rows"><span class="animated rollIn hannah-toc-text">10.rows</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-5"><a class="animated rollIn hannah-toc-link" href="#11-filtered"><span class="animated rollIn hannah-toc-text">11.filtered</span></a></li><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-5"><a class="animated rollIn hannah-toc-link" href="#12-extra"><span class="animated rollIn hannah-toc-text">12.extra</span></a></li></ol></li></ol>
<div class="animated bounceInDown paginations">
    <div class="col-md-8 col-md-push-2 col-xs-12">
        <nav>
            
            <a href="/2020/11/01/linux-custom-command/" class="prev col-md-2 col-xs-4 text-left">&larr; Prev</a>
            
            <span
                class="page-content col-md-8  col-xs-4 text-center">
                
            </span>
            
            <a href="/2020/09/25/java-design-patterns/" class="next col-md-2 col-xs-4 text-right">Next &rarr;</a>
            
        </nav>
        <div>
            <div class="col-md-6 col-xs-6 text-left">
                
                Linux 创建自定义命令
                
            </div>
            <div class="col-md-6 col-xs-6 text-right">
                
                java设计模式
                
            </div>
        </div>
    </div>
</div>

            <!--end body-->
            <!--begin comments-->
            
<div class="comments">
    

    
    
<div id="gitalk-container">
</div>
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script>
    var loadJs = function (d, a) {
        var c = document.getElementsByTagName("head")[0] || document.head || document
            .documentElement;
        var b = document.createElement("script");
        b.setAttribute("type", "text/javascript");
        b.setAttribute("src", d);
        if (typeof a === "function") {
            if (window.attachEvent) {
                b.onreadystatechange = function () {
                    var e = b.readyState;
                    if (e === "loaded" || e === "complete") {
                        b.onreadystatechange = null;
                        a()
                    }
                }
            } else {
                b.onload = a
            }
        }
        c.appendChild(b)
    };
    loadJs("https://unpkg.com/gitalk/dist/gitalk.min.js", function () {
        var gitalk = new Gitalk({
            clientID: '93363d527b7abfb071ed',
            clientSecret: 'e6d6ff61e51b30e6f838e4ca2e6626218f6dd468',
            repo: 'ilubov.github.io',
            owner: 'ilubov',
            admin: ['ilubov'],
            id: decodeURIComponent(location.pathname),
            distractionFreeMode: false
        })

        gitalk.render('gitalk-container')
    });
</script>

</div>


            <!--end comments-->
        </div>
    </div>

    <!--begin footer-->
    <footer id="footer" class="footer animated fadeInUp hide">
    <p><i class="copy">&copy;</i> 2021 <a href="http://yoursite.com">ilubov</a> All Right Reserved.</p>
    <p>Powered by <a target="_blank" href="http://hexo.io" rel="external nofollow noopener">Hexo</a>. Theme by <a target="_blank" href="https://github.com/objectyan/hexo-theme-hannah" rel="external nofollow noopener">hannah</a></p>
</footer>
    <!--end footer-->

    
    <!-- scripts list from theme config.yml -->
    
    <script src="/js/hannah.js"></script>
    
    
    <!--begin analytics-->
    
<script type="text/javascript">
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?8fb2a05be303b36faebf141d7317de43";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>


    <!--end analytics-->
</body>
<!--end body-->
<!--begin canvas-nest-->
<script>
    var nesturl = "https://unpkg.com/canvas-nest.js/dist/canvas-nest.js";
    var c = document.getElementsByTagName("body")[0] || document.body || document.documentElement;
    var b = document.createElement("script");
    b.setAttribute("type", "text/javascript");
    b.setAttribute("src", nesturl);
    b.setAttribute("color",
        `${ Math.floor(Math.random()*256)},${ Math.floor(Math.random()*256)},${ Math.floor(Math.random()*256)}`);
    b.setAttribute("opacity", Math.random());
    b.setAttribute("count", parseInt((Math.random() * 500) || 99));
    c.appendChild(b)
</script>
<!--end canvas-nest-->

</html>